<!DOCTYPE html>
<html>
<head>
<style>
.kodmenu {
  height: 100%;
  width: 100%;
  position: fixed;
  z-index: 1;
  top: 0;
  left: 0;
  background-color: #fbfbfb;
  overflow-x: hidden;
  transition: 0.5s;
  padding-top: 60px;
}

.kodmenu a {
  padding: 8px 8px 8px 32px;
  text-decoration: none;
  font-size: 25px;
  color: #000;
  display: block;
  transition: 0.3s;
}

.kodmenu a:hover {
  color: #4a4a4a;
}

.kodmenu .closebtn {
  position: absolute;
  top: 0;
  right: 25px;
  font-size: 36px;
  margin-left: 50px;
}

/*450 pixelden daha küçük ekranlarda da içeriğin düzgün görünmesi için yapılandırma*/
@media screen and (max-height: 450px) {
  .kodmenu {padding-top: 15px;}
  .kodmenu a {font-size: 18px;}
}
</style>
<title>SMG kutu düzenleme</title>
</head>
<body>
<div id="KodMenusu" class="kodmenu">
	<a href="javascript:void(0)" class="closebtn" onclick="KodMenusunuKapat()">×</a>
	
	<h2>Üzerinde çalışacağınız kod:</h2>
	<textarea id="xmlMetin" rows="13" cols="170" placeholder="Üzerinde çalışmak istdiğiniz kodu buraya yapıştırın."></textarea>

	<h2>Üzerinde çalıştığınız kod:</h2>
	<textarea id="XmlTamamlanan" rows="13" cols="170" placeholder="Tamamladığınız kod blokları burada gözükecektir."></textarea>
</div>
<div style="display: none;"><div id="kukla" style="display: none;"></div></div>

<div id="anasayfa" style="display: block;">
	<button onclick="KodMenusunuAc()">Kod menüsünü aç</button>
	<button onclick="GizleGoster('anasayfa', 'nasilkullanilir')">Nasıl kullanılır?</button>
	<button id="kodblogunugizle" style="display: ;" onclick="IkiGizleIkiGoster('kodblogunugizle', 'uzerindecalisilan', 'kodblogunugöster', 'kukla')">Üzerinde çalıştığım bloğu gizle</button>
	<button id="kodblogunugöster" style="display: none;" onclick="IkiGizleIkiGoster('kodblogunugöster', 'kukla', 'kodblogunugizle', 'uzerindecalisilan')">Üzerinde çalıştığım bloğu göster</button>

	<div id="uzerindecalisilan">
	<h2>Üzerinde çalıştığınız kod bloğu:</h2><br>
	<textarea id="XmlKodBlogu" rows="25" cols="100"></textarea>
	</div>
	<br>

	<h2>Çevirilecek metin:</h2>
	<textarea id="xmlcikti" rows="10" cols="60" oninput="CiktidanXmlParcasinaDonustur()" style="display: none;"></textarea>
	<textarea id="xmlciktiduzgun" rows="15" cols="100"></textarea><br>
	<textarea id="karakter-uzunlugu-hesaplama-kutusu" style="display: none;"></textarea>
	
	<button id="sonrakimesaj">&gt;</button><br><br>
	
	<p id="uzunluk" style="position: absolute; left: 0px;"></p>
</div>

<div id="nasilkullanilir" style="display: none;">
	Nasıl kullanılacağı açıklanacak...
	
	<button onclick="GizleGoster('nasilkullanilir', 'anasayfa')">Nasıl kullanılır?</button>
</div>
<script>
//Girilen Kodları bölerek metin kutusuna aktarır
//Girilen bütün kodu kod parçacığı olarak içe aktarır
function Aktar() {
    var xmlMetin = document.getElementById("xmlMetin").value.trim();
    var aktarilanMetin = "";
    // İlk message etiketini bulma ve içeriğini aktarma
    var baslangicIndex = xmlMetin.indexOf("<message");
    var sonIndex = xmlMetin.indexOf("</message>", baslangicIndex) + 10;
    aktarilanMetin = xmlMetin.substring(baslangicIndex, sonIndex);
    document.getElementById("XmlKodBlogu").value = aktarilanMetin;
    // İlk message etiketini silme
    xmlMetin = xmlMetin.substring(0, baslangicIndex) + xmlMetin.substring(sonIndex);
    document.getElementById("xmlMetin").value = xmlMetin.trim();
}

//Bir sonraki mesaja geçme işlevi
function BloguDisaAktar() {
    var ikinciMetin = document.getElementById("XmlKodBlogu").value;
    var ucuncuMetin = document.getElementById("XmlTamamlanan").value;
    document.getElementById("XmlTamamlanan").value = ucuncuMetin + ikinciMetin + "\n";
}

//Xml ---> Metin
//Xml dosyasını çevirme işlevi
function XmlParcasiniCiktiyaDonustur() { 
    const xmlData = document.getElementById("XmlKodBlogu").value;
    const parser = new DOMParser();
    const xmlDoc = parser.parseFromString(xmlData, "text/xml");
    const stringElement = xmlDoc.getElementsByTagName("string")[0];
    document.getElementById("xmlcikti").value = stringContent;
}

function XmlParcasiniCiktiyaDonustur() { 
    const xmlData = document.getElementById("XmlKodBlogu").value;
    const parser = new DOMParser();
    const xmlDoc = parser.parseFromString(xmlData, "text/xml");
    const stringElement = xmlDoc.getElementsByTagName("string")[0];
    const stringContent = stringElement.innerHTML;
    document.getElementById("xmlcikti").innerHTML = stringContent;
}


//Xml <----> Metin
function CiktiBoslukTemizle() {
    const inputText = document.getElementById("xmlcikti").value;
    const trimmedText = inputText.replace(/\t/g, '').trim();
    document.getElementById("xmlciktiduzgun").value = trimmedText;
}

//Metin ---> Xml
// Veri girdisini XML formatına dönüştür
function CiktidanXmlParcasinaDonustur() {
    const xmlData = document.getElementById("XmlKodBlogu").value;
    const data = document.getElementById("xmlcikti").value;
    const parser = new DOMParser();
    const xmlDoc = parser.parseFromString(xmlData, "text/xml");
    const stringElement = xmlDoc.getElementsByTagName("string")[0];
    stringElement.innerHTML = data;
	const content = stringElement.innerHTML;
    const modifiedContent = content.replace(/ş/g, "ã").replace(/ı/g, "õ").replace(/ğ/g, "ä").replace(/Ş/g, "Ñ").replace(/Ğ/g, "Õ").replace(/İ/g, "Ã").replace(/Ç/g, "ñ");
    stringElement.innerHTML = modifiedContent;
    const serializer = new XMLSerializer();
    const updatedXmlData = serializer.serializeToString(xmlDoc);
    document.getElementById("XmlKodBlogu").value = updatedXmlData;
}

function BosluklariGeriAl() {
    const inputText = document.getElementById("xmlciktiduzgun").value;
    const lines = inputText.split("\n");
    lines.unshift(""); // Başlangıçta boş bir satır ekle
    const indentedLines = lines.map(line => `\t\t${line}`); // Her satırın başına 2 tab karakteri ekle  
    indentedLines.push("\t"); // Sonunda 1 tabdan oluşan bir satır ekle
    const formattedText = indentedLines.join("\n");
    document.getElementById("xmlcikti").value = formattedText;
}

//işlev tetikleyiciler
// Xml'i metin yapmak için işlev tetikleyici
    document.getElementById("XmlKodBlogu").addEventListener("input", function() {
    XmlParcasiniCiktiyaDonustur();
	CiktiBoslukTemizle();
    });

// Metini xml yapmak - uzunluk hesaplamak için işlev tetikleyici
document.getElementById("xmlciktiduzgun").addEventListener("input", function() {
    BosluklariGeriAl();
    CiktidanXmlParcasinaDonustur();
	OzelKarakterleriDonustur();
	KarakterUzunluklariniGoster();
});

//Üzerinde çalışılacak olan kodu içe aktaran event listener
document.getElementById("xmlMetin").addEventListener("input", function() {
    Aktar();
    XmlParcasiniCiktiyaDonustur();
	CiktiBoslukTemizle();
	OzelKarakterleriDonustur();
	KarakterUzunluklariniGoster();
});

//Sonraki Tuşunun İşlevleri
document.getElementById("sonrakimesaj").addEventListener("click", function() {
    BloguDisaAktar();
	Aktar();
	XmlParcasiniCiktiyaDonustur();
	CiktiBoslukTemizle();
	OzelKarakterleriDonustur();
	KarakterUzunluklariniGoster();
});

//------------Satır Sınırlarını Gösterme-----------------
// özel karakterleri dönüştürmek için bazı değişimleri uygula ve uygulana değişimleri başka bir metin kutusuna aktar
function OzelKarakterleriDonustur() {
	var donusmeislemi = document.getElementById("xmlciktiduzgun").value;
	var donusen = donusmeislemi.replace(/<[^>]*>/g, '').replace(/!/g, 'À').replace(/"/g, 'Á').replace(/#/g, 'Ã').replace(/\$/g, 'Ä').replace(/%/g, 'Å').replace(/\&/g, 'Æ').replace(/'/g, 'È').replace(/\(/g, 'É').replace(/\)/g, 'Ë').replace(/\*/g, 'Ó') .replace(/\+/g, 'Õ').replace(/,/g, 'Ù').replace(/\-/g, 'Ú').replace(/\./g, 'à').replace(/\//g, 'á').replace(/:/g, 'ÿ').replace(/;/g, 'ã').replace(/</g, 'ä').replace(/=/g, 'å').replace(/>/g, 'è').replace(/\?/g, 'þ').replace(/@/g, 'é').replace(/_/g, "ý");
	document.getElementById("karakter-uzunlugu-hesaplama-kutusu").value = donusen;
}

//aktarılan metinin uzunluğunu hesapla
function KarakterUzunluklariniGoster() {
	var sayimicinkulanilacakmetin = document.getElementById("karakter-uzunlugu-hesaplama-kutusu").value;
	var gosterilecekmetin = sayimicinkulanilacakmetin.replace(/a(?![^<>]*>)/g, '<canvas style="background-color: green; width: 14px; height: 20px;"></canvas>').replace(/b(?![^<>]*>)/g, '<canvas style="background-color: green; width: 15px; height: 20px;"></canvas>').replace(/c(?![^<>]*>)/g, '<canvas style="background-color: green; width: 13px; height: 20px;"></canvas>').replace(/ç(?![^<>]*>)/g, '<canvas style="background-color: green; width: 13px; height: 20px;"></canvas>').replace(/d(?![^<>]*>)/g, '<canvas style="background-color: green; width: 15px; height: 20px;"></canvas>').replace(/e(?![^<>]*>)/g, '<canvas style="background-color: green; width: 14px; height: 20px;"></canvas>').replace(/f(?![^<>]*>)/g, '<canvas style="background-color: green; width: 11px; height: 20px;"></canvas>').replace(/g(?![^<>]*>)/g, '<canvas style="background-color: green; width: 14px; height: 20px;"></canvas>').replace(/ğ(?![^<>]*>)/g, '<canvas style="background-color: green; width: 15px; height: 20px;"></canvas>').replace(/h(?![^<>]*>)/g, '<canvas style="background-color: green; width: 14px; height: 20px;"></canvas>').replace(/ı(?![^<>]*>)/g, '<canvas style="background-color: green; width: 5px; height: 20px;"></canvas>').replace(/i(?![^<>]*>)/g, '<canvas style="background-color: green; width: 6px; height: 20px;"></canvas>').replace(/j(?![^<>]*>)/g, '<canvas style="background-color: green; width: 9px; height: 20px;"></canvas>').replace(/k(?![^<>]*>)/g, '<canvas style="background-color: green; width: 13px; height: 20px;"></canvas>').replace(/l(?![^<>]*>)/g, '<canvas style="background-color: green; width: 5px; height: 20px;"></canvas>').replace(/m(?![^<>]*>)/g, '<canvas style="background-color: green; width: 20px; height: 20px;"></canvas>').replace(/n(?![^<>]*>)/g, '<canvas style="background-color: green; width: 13px; height: 20px;"></canvas>').replace(/o(?![^<>]*>)/g, '<canvas style="background-color: green; width: 14px; height: 20px;"></canvas>').replace(/ö(?![^<>]*>)/g, '<canvas style="background-color: green; width: 14px; height: 20px;"></canvas>').replace(/p(?![^<>]*>)/g, '<canvas style="background-color: green; width: 15px; height: 20px;"></canvas>').replace(/r(?![^<>]*>)/g, '<canvas style="background-color: green; width: 11px; height: 20px;"></canvas>').replace(/s(?![^<>]*>)/g, '<canvas style="background-color: green; width: 13px; height: 20px;"></canvas>').replace(/ş(?![^<>]*>)/g, '<canvas style="background-color: green; width: 14px; height: 20px;"></canvas>').replace(/t(?![^<>]*>)/g, '<canvas style="background-color: green; width: 10px; height: 20px;"></canvas>').replace(/u(?![^<>]*>)/g, '<canvas style="background-color: green; width: 14px; height: 20px;"></canvas>').replace(/ü(?![^<>]*>)/g, '<canvas style="background-color: green; width: 14px; height: 20px;"></canvas>').replace(/v(?![^<>]*>)/g, '<canvas style="background-color: green; width: 14px; height: 20px;"></canvas>').replace(/y(?![^<>]*>)/g, '<canvas style="background-color: green; width: 15px; height: 20px;"></canvas>').replace(/z(?![^<>]*>)/g, '<canvas style="background-color: green; width: 12px; height: 20px;"></canvas>').replace(/w(?![^<>]*>)/g, '<canvas style="background-color: green; width: 19px; height: 20px;"></canvas>').replace(/x(?![^<>]*>)/g, '<canvas style="background-color: green; width: 13px; height: 20px;"></canvas>').replace(/q(?![^<>]*>)/g, '<canvas style="background-color: green; width: 15px; height: 20px;"></canvas>').replace(/A(?![^<>]*>)/g, '<canvas style="background-color: green; width: 20px; height: 20px;"></canvas>').replace(/B(?![^<>]*>)/g, '<canvas style="background-color: green; width: 18px; height: 20px;"></canvas>').replace(/C(?![^<>]*>)/g, '<canvas style="background-color: green; width: 18px; height: 20px;"></canvas>').replace(/Ç(?![^<>]*>)/g, '<canvas style="background-color: green; width: 14px; height: 20px;"></canvas>').replace(/D(?![^<>]*>)/g, '<canvas style="background-color: green; width: 19px; height: 20px;"></canvas>').replace(/E(?![^<>]*>)/g, '<canvas style="background-color: green; width: 15px; height: 20px;"></canvas>').replace(/F(?![^<>]*>)/g, '<canvas style="background-color: green; width: 15px; height: 20px;"></canvas>').replace(/G(?![^<>]*>)/g, '<canvas style="background-color: green; width: 19px; height: 20px;"></canvas>').replace(/Ğ(?![^<>]*>)/g, '<canvas style="background-color: green; width: 20px; height: 20px;"></canvas>').replace(/H(?![^<>]*>)/g, '<canvas style="background-color: green; width: 18px; height: 20px;"></canvas>').replace(/I(?![^<>]*>)/g, '<canvas style="background-color: green; width: 6px; height: 20px;"></canvas>').replace(/İ(?![^<>]*>)/g, '<canvas style="background-color: green; width: 7px; height: 20px;"></canvas>').replace(/J(?![^<>]*>)/g, '<canvas style="background-color: green; width: 14px; height: 20px;"></canvas>').replace(/K(?![^<>]*>)/g, '<canvas style="background-color: green; width: 17px; height: 20px;"></canvas>').replace(/L(?![^<>]*>)/g, '<canvas style="background-color: green; width: 14px; height: 20px;"></canvas>').replace(/M(?![^<>]*>)/g, '<canvas style="background-color: green; width: 23px; height: 20px;"></canvas>')  .replace(/N(?![^<>]*>)/g, '<canvas style="background-color: green; width: 18px; height: 20px;"></canvas>').replace(/O(?![^<>]*>)/g, '<canvas style="background-color: green; width: 19px; height: 20px;"></canvas>').replace(/Ö(?![^<>]*>)/g, '<canvas style="background-color: green; width: 19px; height: 20px;"></canvas>').replace(/P(?![^<>]*>)/g, '<canvas style="background-color: green; width: 18px; height: 20px;"></canvas>').replace(/R(?![^<>]*>)/g, '<canvas style="background-color: green; width: 19px; height: 20px;"></canvas>').replace(/S(?![^<>]*>)/g, '<canvas style="background-color: green; width: 15px; height: 20px;"></canvas>').replace(/Ş(?![^<>]*>)/g, '<canvas style="background-color: green; width: 18px; height: 20px;"></canvas>').replace(/T(?![^<>]*>)/g, '<canvas style="background-color: green; width: 15px; height: 20px;"></canvas>').replace(/U(?![^<>]*>)/g, '<canvas style="background-color: green; width: 18px; height: 20px;"></canvas>').replace(/Ü(?![^<>]*>)/g, '<canvas style="background-color: green; width: 18px; height: 20px;"></canvas>').replace(/V(?![^<>]*>)/g, '<canvas style="background-color: green; width: 18px; height: 20px;"></canvas>').replace(/Y(?![^<>]*>)/g, '<canvas style="background-color: green; width: 19px; height: 20px;"></canvas>').replace(/Z(?![^<>]*>)/g, '<canvas style="background-color: green; width: 16px; height: 20px;"></canvas>').replace(/W(?![^<>]*>)/g, '<canvas style="background-color: green; width: 24px; height: 20px;"></canvas>').replace(/X(?![^<>]*>)/g, '<canvas style="background-color: green; width: 17px; height: 20px;"></canvas>').replace(/Q(?![^<>]*>)/g, '<canvas style="background-color: green; width: 20px; height: 20px;"></canvas>').replace(/\n/g, '<br>').replace(/\s(?![^<>]*>)/g, '<canvas style="background-color: green; width: 9px; height: 20px;"></canvas>').replace(/À/g, '<canvas style="background-color: green; width: 7px; height: 20px;"></canvas>').replace(/Á/g, '<canvas style="background-color: green; width: 8px; height: 20px;"></canvas>').replace(/Ã/g, '<canvas style="background-color: green; width: 14px; height: 20px;"></canvas>').replace(/Ä/g, '<canvas style="background-color: green; width: 15px; height: 20px;"></canvas>').replace(/Å/g, '<canvas style="background-color: green; width: 24px; height: 20px;"></canvas>').replace(/Æ/g, '<canvas style="background-color: green; width: 18px; height: 20px;"></canvas>').replace(/È/g, '<canvas style="background-color: green; width: 4px; height: 20px;"></canvas>').replace(/É/g, '<canvas style="background-color: green; width: 9px; height: 20px;"></canvas>').replace(/Ë/g, '<canvas style="background-color: green; width: 9px; height: 20px;"></canvas>').replace(/Ó/g, '<canvas style="background-color: green; width: 10px; height: 20px;"></canvas>').replace(/Õ/g, '<canvas style="background-color: green; width: 13px; height: 20px;"></canvas>').replace(/Ù/g, '<canvas style="background-color: green; width: 5px; height: 20px;"></canvas>').replace(/Ú/g, '<canvas style="background-color: green; width: 9px; height: 20px;"></canvas>').replace(/à/g, '<canvas style="background-color: green; width: 5px; height: 20px;"></canvas>').replace(/á/g, '<canvas style="background-color: green; width: 10px; height: 20px;"></canvas>').replace(/ÿ/g, '<canvas style="background-color: green; width: 5px; height: 20px;"></canvas>').replace(/ã/g, '<canvas style="background-color: green; width: 5px; height: 20px;"></canvas>').replace(/ä/g, '<canvas style="background-color: green; width: 12px; height: 20px;"></canvas>').replace(/å/g, '<canvas style="background-color: green; width: 13px; height: 20px;"></canvas>').replace(/è/g, '<canvas style="background-color: green; width: 13px; height: 20px;"></canvas>').replace(/þ/g, '<canvas style="background-color: green; width: 15px; height: 20px;"></canvas>').replace(/é/g, '<canvas style="background-color: green; width: 22px; height: 20px;"></canvas>').replace(/ý/g, '<canvas style="background-color: green; width: 13px; height: 20px;"></canvas>').replace(/0(?![^<>]*>)/g, '<canvas style="background-color: green; width: 16px; height: 20px;"></canvas>').replace(/1(?![^<>]*>)(?![^<>]*>)/g, '<canvas style="background-color: green; width: 16px; height: 20px;"></canvas>').replace(/2(?![^<>]*>)(?![^<>]*>)/g, '<canvas style="background-color: green; width: 16px; height: 20px;"></canvas>').replace(/3(?![^<>]*>)(?![^<>]*>)/g, '<canvas style="background-color: green; width: 16px; height: 20px;"></canvas>').replace(/4(?![^<>]*>)(?![^<>]*>)/g, '<canvas style="background-color: green; width: 16px; height: 20px;"></canvas>').replace(/5(?![^<>]*>)(?![^<>]*>)/g, '<canvas style="background-color: green; width: 16px; height: 20px;"></canvas>').replace(/6(?![^<>]*>)(?![^<>]*>)/g, '<canvas style="background-color: green; width: 16px; height: 20px;"></canvas>').replace(/7(?![^<>]*>)(?![^<>]*>)/g, '<canvas style="background-color: green; width: 16px; height: 20px;"></canvas>').replace(/8(?![^<>]*>)(?![^<>]*>)/g, '<canvas style="background-color: green; width: 16px; height: 20px;"></canvas>').replace(/9(?![^<>]*>)(?![^<>]*>)/g, '<canvas style="background-color: green; width: 16px; height: 20px;"></canvas>');
	uzunluk.innerHTML = gosterilecekmetin;
}

//yan menüyü açıp kapamak için yapılandırma
function KodMenusunuAc() {
  document.getElementById("KodMenusu").style.width = "100%";
}

function KodMenusunuKapat() {
  document.getElementById("KodMenusu").style.width = "0";
}

//Sayfa öğelerini gösterme/gizleme
function GizleGoster(hideId, showId) {
  document.getElementById(hideId).style.display = 'none';
  document.getElementById(showId).style.display = 'block';
}

//2 sayfa öğesini gizle-göster
function IkiGizleIkiGoster(hideId, hideId2, showId, showId2) {
  document.getElementById(hideId).style.display = 'none';
  document.getElementById(hideId2).style.display = 'none';
  document.getElementById(showId).style.display = '';
  document.getElementById(showId2).style.display = '';
}

</script>
</body>
</html>
